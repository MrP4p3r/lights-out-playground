!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){(function(n){var r,i;
/*!
 * reef v3.0.0
 * A lightweight helper function for creating reactive, state-based components and UI
 * (c) 2019 Chris Ferdinandi
 * MIT License
 * http://github.com/cferdinandi/reef
 */Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),i=void 0!==n?n:"undefined"!=typeof window?window:this,void 0===(r=function(){return function(t){"use strict";var e,n=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},r=function(t){if(t)return JSON.parse(JSON.stringify(t))},i=function(t,e){var n=t.filter(e);return n.length<1?null:n[0]},o=function(t){return t},a=function(n,r){if(!function(){if(!t.DOMParser)return!1;e=e||new DOMParser;try{e.parseFromString("x","text/html")}catch(t){return!1}return!0}())throw new Error("Reef.js is not supported by this browser.");if(!(n||r&&r.lagoon))throw new Error("Reef.js: You did not provide an element to make into a component.");if(!r||!r.template&&!r.lagoon)throw new Error("Reef.js: You did not provide a template for this component.");if(this.elem=n,this.data=r.data,this.template=r.template,this.sanitize=r.sanitize,this.attached=[],this.lagoon=r.lagoon,r.attachTo){var i=this;r.attachTo.forEach(function(t){"attach"in t&&t.attach(i)})}};a.setSanitizer=function(t){o=t};var s=function(t,e){e.forEach(function(e){t.style[e]=""})},l=function(t,e){e.forEach(function(e){"class"===e.att?t.className=e.value:"style"===e.att?function(t,e){var n=function(t){return t.split(";").filter(function(t){return t.indexOf(":")>0}).map(function(t){var e=t.split(":");return{name:e[0]?e[0].trim():"",value:e[1]?e[1].trim():""}})}(e),r=Array.prototype.filter.call(t.style,function(e){var r=i(n,function(n){return n.name===e&&n.value===t.style[e]});return null===r});s(t,r),function(t,e){e.forEach(function(e){t.style[e.name]=e.value})}(t,n)}(t,e.value):t.setAttribute(e.att,e.value||!0)})},c=function(t){var e;return e="text"===t.type?document.createTextNode(t.content):"comment"===t.type?document.createComment(t.content):t.isSVG?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),l(e,t.atts),t.children.length>0?t.children.forEach(function(t){e.appendChild(c(t))}):"text"!==t.type&&(e.textContent=t.content),e},u=function(t,e){var n,r=e.atts.filter(function(e){var n=i(t.atts,function(t){return e.att===t.att});return null===n}),o=t.atts.filter(function(t){var n=i(e.atts,function(e){return t.att===e.att});return null===n||n.value!==t.value});l(e.node,o),n=e.node,r.forEach(function(t){"class"===t.att?n.className="":"style"===t.att?s(n,Array.prototype.slice.call(n.style)):n.removeAttribute(t.att)})},f=function(t,e,n,r){var i=e.length-t.length;if(i>0)for(;i>0;i--)e[e.length-i].node.parentNode.removeChild(e[e.length-i].node);t.forEach(function(i,o){if(e[o])if(t[o].type===e[o].type){u(t[o],e[o]);var a=r.filter(function(t){return 3!==i.node.nodeType&&i.node.matches(t)});a.length>0||(t[o].content!==e[o].content&&(e[o].node.textContent=t[o].content),i.children.length>0&&f(i.children,e[o].children||[],e[o].node,r))}else e[o].node.parentNode.replaceChild(c(t[o]),e[o].node);else n.appendChild(c(t[o]))})},p=function(t,e){return Array.prototype.map.call(t.childNodes,function(t){var n,r={content:t.childNodes&&t.childNodes.length>0?null:t.textContent,atts:1!==t.nodeType?[]:(n=t.attributes,Array.prototype.map.call(n,function(t){return{att:t.name,value:t.value}})),type:3===t.nodeType?"text":8===t.nodeType?"comment":t.tagName.toLowerCase(),node:t};return r.isSVG=e||"svg"===r.type,r.children=p(t,r.isSVG),r})},h=function(t,e){t&&t.forEach(function(t){if(t.attached.indexOf(e)>-1)throw new Error("ReefJS: "+e.elem+" has attached nodes that it is also attached to, creating an infinite loop.");"render"in t&&t.render()})};return a.prototype.render=function(){if(this.lagoon)h(this.attached,this);else{if(!this.template)throw new Error("Reef.js: No template was provided.");var n="string"==typeof this.elem?document.querySelector(this.elem):this.elem;if(!n)throw new Error("Reef.js: The DOM element to render your template into was not found.");var i="function"==typeof this.template?this.template(r(this.data)):this.template;if(-1!==["string","number"].indexOf(typeof i)){var a,s=p((d=i,v=this.sanitize,a=v&&"function"==typeof v?v(d):o(d),(e=e||new DOMParser).parseFromString(a,"text/html").body)),l=p(n),c=this.attached.map(function(t){return t.elem});if(f(s,l,n,c),"function"==typeof t.CustomEvent){var u=new CustomEvent("render",{bubbles:!0});n.dispatchEvent(u)}return h(this.attached,this),n}}var d,v},a.prototype.getData=function(){return r(this.data)},a.prototype.setData=function(t){if("object"!==n(t))throw new Error("ReefJS: The provided data is not an object.");for(var e in t)t.hasOwnProperty(e)&&(this.data[e]=t[e]);this.render()},a.prototype.attach=function(t){"array"===n(t)?Array.prototype.push.apply(this.attached,t):this.attached.push(t)},a.prototype.detach=function(t){var e="array"===n(t);this.attached=this.attached.filter(function(n){return e?-1===t.indexOf(n):n!==t})},a}(i)}.apply(e,[]))||(t.exports=r)}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(3);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=t.exports=n(4)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css?family=Lobster);",""]),e.push([t.i,"@import url(https://fonts.googleapis.com/css?family=Oswald);",""]),e.push([t.i,"/* styles.css */\n\n:root {\n    /* Color scheme */\n    --col-bg: #101515;\n    --col-bg-light: #273536;\n    --col-button-bg: #273536;\n    --col-text: #BAFFBA;\n    --col-alert: #8E0A1F;\n\n\n    --col-black: #0A1006;\n    --col-darkgray: #0f1919;\n    --col-gray: #132225;\n    --col-lightgray: #273536;\n    --col-blue: #082231;\n    --col-lightblue: #5EEBE3;\n    --col-yellow: #F5D522;\n    --col-red: #8E0A1F;\n}\n\n* {\n    /* Minimal reset */\n    padding: 0;\n    margin: 0;\n}\n\nbody {\n    background: var(--col-bg);\n    font-family: 'Oswald', sans-serif;\n}\n\nheader {\n    width: 100%;\n    height: 64px;\n    text-align: center;\n}\n\nheader > .title {\n    font-family: 'Lobster', cursive;\n    color: var(--col-bg-light);\n    text-shadow: 2px 2px 8px var(--col-yellow), -2px -2px 8px var(--col-lightblue);\n    font-size: 24pt;\n    padding-top: 16px;\n}\n\n\n#field-controls {\n    text-align: center;\n    margin: 30px;\n    font-size: 12pt;\n}\n\n.button {\n    --accent-color: var(--col-lightblue);\n\n    cursor: pointer;\n    user-select: none;\n\n    margin: 8px;\n    padding: 8px 32px;\n    background: var(--col-button-bg);\n    color: var(--accent-color);\n    text-shadow: 0 0 2px var(--accent-color);\n}\n\n.button.main {\n    --accent-color: var(--col-yellow);\n}\n\n.button.active {\n    box-shadow: 0 0 4px 2px var(--accent-color);\n}\n\n.game-field {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin: 30px\n}\n\n.cells-row {\n    display: flex;\n    flex-direction: row;\n}\n\n.cell-wrapper {\n    margin: 8px;\n    padding: 8px;\n    background: var(--col-lightgray);\n}\n\n.cell-wrapper[data-cell-highlight=\"true\"] {\n    box-shadow: 0 0 4px 1px var(--col-yellow);\n}\n\n.cell {\n    cursor: pointer;\n    height: 32px;\n    width: 32px;\n    background: var(--col-gray);\n}\n\n.cell[data-cell-activated=\"true\"] {\n    background: var(--col-lightblue);\n    box-shadow: 0 0 8px 0 var(--col-lightblue);\n}\n\n.note {\n    color: var(--col-text);\n    background: var(--col-alert);\n    box-sizing: border-box;\n    padding: 8px 0 0 0;\n    height: 56px;\n    text-align: center;\n    font-size: 18pt;\n    margin: 30px 120px;\n}\n",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),l=null,c=0,u=[],f=n(6);function p(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(g(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(g(r.parts[a],e));o[r.id]={id:r.id,refs:1,parts:s}}}}function h(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function d(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(t.insertAt.before,n);n.insertBefore(e,i)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return y(e,t.attrs),d(t,e),e}function y(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var a=c++;n=l||(l=m(e)),r=S.bind(null,n,a,!1),i=S.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",y(e,t.attrs),d(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=f(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){v(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return p(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}t&&p(h(t,e),e);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function S(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){"use strict";n.r(e);var r,i=n(0),o=n.n(i),a=function(){this.size=0,this.items=[],this.tips=[],this.showSolution=!1,this.solverSucceed=null,this.playMode=!1},s=(n(2),function(t){var e=t.size,n=t.items,r=t.tips,i="";return i+=l(),i+=c(t.showSolution,t.playMode),i+=f(e,n,r,t.showSolution),i+=u(t.solverSucceed)}),l=function(){return'<header><div class="title"><span>Lights Out Playground</span></div></header>'},c=function(t,e){var n="";return n+='<div id="field-controls">',n+='<a id="button-solve" class="button main '.concat(t?"active":"",'">Solve!</a>'),n+='<a id="button-play-mode" class="button '.concat(e?"active":"",'">Play</a>'),n+='<a id="button-randomize" class="button">Randomize</a>',n+='<a id="button-clean" class="button">Clean</a>',n+='<a id="button-dec-size" class="button">Size--</a>',n+='<a id="button-inc-size" class="button">Size++</a>',n+="</div>"},u=function(t){var e="";return!1===t&&(e+='<div class="note"><p>It seems this field presentation is not valid.</p></div>'),e},f=(r={render:function(t,e,n,r){for(var i='<div class="game-field">',o=0;o<t;o++)i+=this._renderRow(t,o,e[o],n[o],r);return i+="</div>"},_renderRow:function(t,e,n,r,i){for(var o='<div class="cells-row">',a=0;a<t;a++)o+=this._renderCell(e,a,n[a],r[a],i);return o+="</div>"},_renderCell:function(t,e,n,r,i){var o="";return o+='<div class="cell-wrapper" data-cell-highlight="'.concat(!!i&&r,'"> '),o+="<div ",o+='class="cell" ',o+="data-cell-activated=".concat(n," "),o+="data-cell-i=".concat(t," "),o+="data-cell-j=".concat(e," "),o+="></div></div>"}}).render.bind(r),p=function(t){this.controller=t,this.component=new o.a("#app_root",{template:s})},h=p;p.prototype.attachTo=function(t){this.component.data=t.data,t.attach(this.component)},p.prototype.render=function(){this.component.render()},p.prototype.setupEventListeners=function(){var t=this.controller;document.addEventListener("click",function(e){var n=e.target;if(n.classList.contains("cell")){var r=Number.parseInt(n.getAttribute("data-cell-i")),i=Number.parseInt(n.getAttribute("data-cell-j"));t.clickCell(r,i)}else if("button-solve"===n.id)t.solve();else if("button-inc-size"===n.id||"button-dec-size"===n.id){var o="button-inc-size"===n.id?1:-1,a=t.getFieldSize()+o;t.setFieldSize(a)}else"button-play-mode"===n.id?t.setPlayMode(!t.getPlayMode()):"button-randomize"===n.id?t.randomizeField():"button-clean"===n.id&&t.cleanField()})};var d,v=(d={},function(t,e){return void 0===d[t]&&(d[t]={}),void 0===d[t][e]&&(d[t][e]={i:t,j:e}),d[t][e]}),m=function(t,e){this.size=t,this.items=e};m.makeNewEmpty=function(t){for(var e=[],n=0;n<t;n++){for(var r=[],i=0;i<t;i++)r.push(!1);e.push()}return new m(t,e)};var y=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];m.call.apply(m,[this].concat(e))};(y.prototype=Object.create(m.prototype)).getSum=function(t,e){var n=this.items,r=this.size,i=!1;return i^=n[t][e],t>0&&(i^=n[t-1][e]),t<r-1&&(i^=n[t+1][e]),e>0&&(i^=n[t][e-1]),e<r-1&&(i^=n[t][e+1]),Boolean(i)},y.MakeNew=function(t,e){for(var n=[],r=0;r<t;r++){n.push([]);for(var i=0;i<t;i++)n[r].push(e(r,i))}return new y(t,n)};var g=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];m.call.apply(m,[this].concat(e))};(g.prototype=Object.create(m.prototype)).fitsState=function(t){if(t.size!==this.size)throw"Presentation and state sizes must match";for(var e=0;e<this.size;e++)for(var n=0;n<this.size;n++)if(t.getSum(e,n)!==this.items[e][n])return!1;return!0},g.prototype.inverse=function(){for(var t=[],e=0;e<this.size;e++){t.push([]);for(var n=0;n<this.size;n++)t[e].push(!this.items[e][n])}return new g(this.size,t)},g.prototype.toggle=function(t,e){var n=this.items,r=this.size;n[t][e]=!0!==n[t][e],t>0&&(n[t-1][e]=!n[t-1][e]),t<r-1&&(n[t+1][e]=!n[t+1][e]),e>0&&(n[t][e-1]=!n[t][e-1]),e<r-1&&(n[t][e+1]=!n[t][e+1])},g.MakeNew=function(t,e){for(var n=[],r=0;r<t;r++){n.push([]);for(var i=0;i<t;i++)n[r].push(e(r,i))}return new g(t,n)};var b=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];m.call.apply(m,[this].concat(e))};function w(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(b.prototype=Object.create(m.prototype)).getEffectiveness=function(){for(var t=0,e=0;e<this.size;e++)for(var n=0;n<this.size;n++)this.items[e][n]&&t++;return t};var S=function(t){this.size=t,this._cellsStack=[],this._filledCellsStack=[]};function x(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}S.prototype.push=function(t){var e;this._cellsStack.push(t),e=0===this._filledCellsStack.length?new Set:this._filledCellsStack[this._filledCellsStack.length-1],e=new Set(w(e).concat(w(t.keys()))),this._filledCellsStack.push(e)},S.prototype.pop=function(){this._cellsStack.pop(),this._filledCellsStack.pop()},S.prototype.get=function(t){if(0===this._filledCellsStack.length||!this._filledCellsStack[this._filledCellsStack.length-1].has(t))return null;for(var e=0;e<this._cellsStack.length;e++)if(this._cellsStack[e].has(t))return this._cellsStack[e].get(t)},S.prototype.set=function(t,e){this._cellsStack[this._cellsStack.length-1].set(t,e),this._filledCellsStack[this._filledCellsStack.length-1].add(t)},S.prototype.has=function(t){var e=this._filledCellsStack[this._filledCellsStack.length-1];return void 0!==e&&e.has(t)},S.prototype.hasAllValues=function(){return this._filledCellsStack.length&&this._filledCellsStack[this._filledCellsStack.length-1].size===this.size*this.size},S.prototype.toState=function(){for(var t=[],e=0;e<this.size;e++){t.push([]);for(var n=0;n<this.size;n++)t[e].push(this.get(v(e,n)))}return new y(this.size,t)};var z=function(t,e,n,r){var i=[e];e.i>0&&i.push(v(e.i-1,e.j)),e.i<t-1&&i.push(v(e.i+1,e.j)),e.j>0&&i.push(v(e.i,e.j-1)),e.j<t-1&&i.push(v(e.i,e.j+1));var o=i.concat().filter(function(t){return r.has(t)}),a=o.reduce(function(t,e){return t!==r.get(e)},!1);if(o.length===i.length)return n===a?[new Map]:null;var s=i.concat().filter(function(t){return!r.has(t)}),l=[],c=!0,u=!1,f=void 0;try{for(var p,h=j(s.length)[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var d=p.value;if(d.reduce(function(t,e){return t!==e},a)===n){var m=new Map(M(s,d));l.push(m)}}}catch(t){u=!0,f=t}finally{try{c||null==h.return||h.return()}finally{if(u)throw f}}return 0===l.length?null:l},k=function(t){this.size=t};k.prototype.get=function(t){return v(Math.floor(t/this.size),t%this.size)};var j=function(t){for(var e=Math.pow(2,t),n=[],r=0;r<e;r++){for(var i=[],o=0;o<t;o++)i.push((r&1<<o)>0);n.push(i)}return n},M=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=n.map(function(t){return t.length}).reduce(function(t,e){return e<t?e:t},t.length),o=[],a=function(e){o.push([t[e]].concat(x(n.map(function(t){return t[e]}))))},s=0;s<i;s++)a(s);return o},E=function(t,e){this.fieldSize=t,this.fillDirective=e},C=function(t){this.presentationMatrix=t},A=function(t,e){this.fieldSize=t,this.presentationMatrix=e},O=function(t,e,n){this.success=t,this.fieldSize=e,this.diffMatrix=n},_=function(t){var e=t.fieldSize,n=function(t){var e=[],n=[],r=[],i=0,o=t.size,a=new k(o),s=a.get(i),l=t.items[s.i][s.j],c=new S(o);for(n.push(z(o,s,l,c)),r.push(-1);0!==n.length;){var u=++r[r.length-1];if(u>=n[n.length-1].length)i--,c.pop(),n.pop(),r.pop();else{var f=n[n.length-1][u];if(c.push(f),i===o*o-1&&c.hasAllValues())e.push(c.toState()),c.pop();else{s=a.get(++i),l=t.items[s.i][s.j];var p=z(o,s,l,c);null!==p?(n.push(p),r.push(-1)):(i--,c.pop())}}}return e}(new g(e,t.presentationMatrix).inverse()).map(function(t){return new b(t.size,t.items)});if(0===n.length)return new O(!1);var r=N(n);return new O(!0,e,r.items)},N=function(t){for(var e=t[0],n=e.getEffectiveness(),r=1;r<t.length;r++){var i=t[r].getEffectiveness();i<n&&(e=t[r],n=i)}return e},D=function(t,e,n,r){this.fieldSize=t,this.presentationMatrix=e,this.i=n,this.j=r},R=function(t){this.newPresentationMatrix=t},L=function(t){this.state=t},T=L;L.prototype.initialize=function(){this.state.setData(this._makeNewField(3,null))},L.prototype._makeNewField=function(t,e){for(var n=function(t){var e,n=t.fieldSize;switch(t.fillDirective){case null:var r=y.MakeNew(n,function(){return Math.random()<.5});e=new g.MakeNew(t.fieldSize,function(t,e){return r.getSum(t,e)});break;case!0:case!1:e=new g.MakeNew(t.fieldSize,function(){return t.fillDirective});break;default:throw"Unknown fillDirective ".concat(t.fillDirective)}return new C(e.items)}(new E(t,e)).presentationMatrix,r=[],i=0;i<t;i++){r.push([]);for(var o=0;o<t;o++)r[i].push(!1)}return{size:t,items:n,tips:r,solverSucceed:null,showSolution:!1}},L.prototype.getFieldSize=function(){return this.state.getData().size},L.prototype.setFieldSize=function(t){t<2||t>12||this.state.setData(this._makeNewField(t,null))},L.prototype.solve=function(){var t=this.state.getData();if(t.showSolution)t.showSolution=!1,this.state.setData(t);else{var e=new A(t.size,t.items),n=_(e),r={solverSucceed:n.success};n.success&&(r.tips=n.diffMatrix,r.showSolution=!0),this.state.setData(r)}},L.prototype.clickCell=function(t,e){var n=this.state.getData();if(n.playMode){var r=function(t){var e=new g(t.fieldSize,t.presentationMatrix);return e.toggle(t.i,t.j),new R(e.items)}(new D(n.size,n.items,t,e));n.items=r.newPresentationMatrix,n.solverSucceed&&(n.tips[t][e]=!0!==n.tips[t][e]),this.state.setData(n)}else n.items[t][e]=!n.items[t][e],this.state.setData({items:n.items,showSolution:!1})},L.prototype.getPlayMode=function(){return this.state.getData().playMode},L.prototype.setPlayMode=function(t){var e=this.state.getData();e.playMode=t,this.state.setData(e)},L.prototype.randomizeField=function(){var t=this.state.getData(),e=this._makeNewField(t.size,null);this.state.setData(e)},L.prototype.cleanField=function(){var t,e=this.state.getData(),n=e.items.reduce(function(t,e){return t+e.reduce(function(t,e){return t+e},!1)},!1);t=0===n||(e.size,e.size,!1),this.state.setData(this._makeNewField(e.size,t))};var F,U,P,I;F=new a,U=new o.a(null,{lagoon:!0,data:F}),P=new T(U),I=new h(P),P.initialize(),I.attachTo(U),I.setupEventListeners(),I.render()}]);