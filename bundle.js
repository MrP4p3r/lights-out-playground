!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){(function(n){var i,o;
/*!
 * reef v1.0.0: A lightweight helper function for creating reactive, state-based components and UI
 * (c) 2018 Chris Ferdinandi
 * MIT License
 * http://github.com/cferdinandi/reef
 */
/*!
 * reef v1.0.0: A lightweight helper function for creating reactive, state-based components and UI
 * (c) 2018 Chris Ferdinandi
 * MIT License
 * http://github.com/cferdinandi/reef
 */
o=void 0!==n?n:"undefined"!=typeof window?window:this,void 0===(i=function(){return function(t){"use strict";var e,n=["for"],i=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},o=function(t){if(t)return JSON.parse(JSON.stringify(t))},r=function(t,e){var n=t.filter(e);return n.length<1?null:n[0]},s=function(n,i){if(!function(){if(!Array.prototype.find||!Array.from||!t.DOMParser)return!1;e=e||new DOMParser;try{e.parseFromString("x","text/html")}catch(t){return!1}return!0}())throw new Error("Reef.js is not supported by this browser.");if(!(n||i&&i.lagoon))throw new Error("Reef.js: You did not provide an element to make into a component.");if(!i||!i.template&&!i.lagoon)throw new Error("Reef.js: You did not provide a template for this component.");if(this.elem=n,this.data=i.data,this.template=i.template,this.attached=[],this.lagoon=i.lagoon,i.attachTo){var o=this;i.attachTo.forEach(function(t){"attach"in t&&t.attach(o)})}},a=function(t,e){e.forEach(function(e){var i;"class"===e.att?t.className=e.value:"data-"===(i=e.att).slice(0,5)||n.indexOf(i)>-1?t.setAttribute(e.att,e.value):t[e.att]=e.value})},l=function(t){var e="text"===t.type?document.createTextNode(t.content):document.createElement(t.type);return a(e,t.atts),t.children.length>0?t.children.forEach(function(t){e.appendChild(l(t))}):"text"!==t.type&&(e.textContent=t.content),e},c=function(t,e,n,i){var o=e.length-t.length;if(o>0)for(;o>0;o--)e[e.length-o].node.parentNode.removeChild(e[e.length-o].node);t.forEach(function(o,s){if(e[s])if(t[s].type===e[s].type){!function(t,e){var n,i=e.atts.filter(function(e){var n=r(t.atts,function(t){return e.att===t.att});return null===n}),o=t.atts.filter(function(t){var n=r(e.atts,function(e){return t.att===e.att});return null===n||n.value!==t.value});a(e.node,o),n=e.node,i.forEach(function(t){"class"===t.att?n.className="":n.removeAttribute(t.att)})}(t[s],e[s],e[s].node);var u=i.filter(function(t){return 3!==o.node.nodeType&&o.node.matches(t)});u.length>0||(t[s].content!==e[s].content&&(e[s].node.textContent=t[s].content),o.children.length>0&&c(o.children,e[s].children||[],e[s].node,i))}else e[s].node.parentNode.replaceChild(l(t[s]),e[s].node);else n.appendChild(l(t[s]))})},u=function(t){var e=[];return Array.prototype.forEach.call(t.childNodes,function(t){var n;e.push({content:t.childNodes&&t.childNodes.length>0?null:t.textContent,atts:3===t.nodeType?[]:(n=t.attributes,Array.prototype.map.call(n,function(t){return{att:t.name,value:t.value}})),type:3===t.nodeType?"text":t.tagName.toLowerCase(),children:u(t),node:t})}),e},f=function(t,e){t&&t.forEach(function(t){if(t.attached.indexOf(e)>-1)throw new Error("ReefJS: "+e.elem+" has attached nodes that it is also attached to, creating an infinite loop.");"render"in t&&t.render()})};return s.prototype.render=function(){if(this.lagoon)f(this.attached,this);else{if(!this.template)throw new Error("Reef.js: No template was provided.");var n="string"==typeof this.elem?document.querySelector(this.elem):this.elem;if(!n)throw new Error("Reef.js: The DOM element to render your template into was not found.");var i="function"==typeof this.template?this.template(o(this.data)):this.template;if(-1!==["string","number"].indexOf(typeof i)){var r,s=u((r=i,(e=e||new DOMParser).parseFromString(r,"text/html").body),l),a=u(n,l),l=this.attached.map(function(t){return t.elem});if(c(s,a,n,l),"function"==typeof t.CustomEvent){var p=new CustomEvent("render",{bubbles:!0});n.dispatchEvent(p)}return f(this.attached,this),n}}},s.prototype.getData=function(){return o(this.data)},s.prototype.setData=function(t){if("object"!==i(t))throw new Error("ReefJS: The provided data is not an object.");for(var e in t)t.hasOwnProperty(e)&&(this.data[e]=t[e]);this.render()},s.addAttributes=function(t){"array"===i(t)?Array.prototype.push.apply(n,t):n.push(t)},s.removeAttributes=function(t){var e="array"===i(t);n=n.filter(function(n){return e?-1===t.indexOf(n):n!==t})},s.prototype.attach=function(t){"array"===i(t)?Array.prototype.push.apply(this.attached,t):this.attached.push(t)},s.prototype.detach=function(t){var e="array"===i(t);this.attached=this.attached.filter(function(n){return e?-1===t.indexOf(n):n!==t})},s}(o)}.apply(e,[]))||(t.exports=i)}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i=n(3);"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(5)(i,o);i.locals&&(t.exports=i.locals)},function(t,e,n){(e=t.exports=n(4)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css?family=Lobster);",""]),e.push([t.i,"@import url(https://fonts.googleapis.com/css?family=Oswald);",""]),e.push([t.i,"/* styles.css */\n\n:root {\n    /* Color scheme */\n    --col-bg: #101515;\n    --col-bg-light: #273536;\n    --col-button-bg: #273536;\n    --col-text: #BAFFBA;\n    --col-alert: #8E0A1F;\n\n\n    --col-black: #0A1006;\n    --col-darkgray: #0f1919;\n    --col-gray: #132225;\n    --col-lightgray: #273536;\n    --col-blue: #082231;\n    --col-lightblue: #5EEBE3;\n    --col-yellow: #F5D522;\n    --col-red: #8E0A1F;\n}\n\n* {\n    /* Minimal reset */\n    padding: 0;\n    margin: 0;\n}\n\nbody {\n    background: var(--col-bg);\n    font-family: 'Oswald', sans-serif;\n}\n\nheader {\n    width: 100%;\n    height: 64px;\n    text-align: center;\n}\n\nheader > .title {\n    font-family: 'Lobster', cursive;\n    color: var(--col-bg-light);\n    text-shadow: 2px 2px 8px var(--col-yellow), -2px -2px 8px var(--col-lightblue);\n    font-size: 24pt;\n    padding-top: 16px;\n}\n\n\n#field-controls {\n    text-align: center;\n    margin: 30px;\n    font-size: 12pt;\n}\n\n.button {\n    --accent-color: var(--col-lightblue);\n\n    cursor: pointer;\n    user-select: none;\n\n    margin: 8px;\n    padding: 8px 32px;\n    background: var(--col-button-bg);\n    color: var(--accent-color);\n    text-shadow: 0 0 2px var(--accent-color);\n}\n\n.button.main {\n    --accent-color: var(--col-yellow);\n}\n\n.button.active {\n    box-shadow: 0 0 4px 2px var(--accent-color);\n}\n\n.game-field {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin: 30px\n}\n\n.cells-row {\n    display: flex;\n    flex-direction: row;\n}\n\n.cell-wrapper {\n    margin: 8px;\n    padding: 8px;\n    background: var(--col-lightgray);\n}\n\n.cell-wrapper[data-cell-highlight=\"true\"] {\n    box-shadow: 0 0 4px 1px var(--col-yellow);\n}\n\n.cell {\n    cursor: pointer;\n    height: 32px;\n    width: 32px;\n    background: var(--col-gray);\n}\n\n.cell[data-cell-activated=\"true\"] {\n    background: var(--col-lightblue);\n    box-shadow: 0 0 8px 0 var(--col-lightblue);\n}\n\n.note {\n    color: var(--col-text);\n    background: var(--col-alert);\n    box-sizing: border-box;\n    padding: 8px 0 0 0;\n    height: 56px;\n    text-align: center;\n    font-size: 18pt;\n    margin: 30px 120px;\n}\n",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var o=(s=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),r=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[n].concat(r).concat([o]).join("\n")}var s;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){var i,o,r={},s=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),a=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var i=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),l=null,c=0,u=[],f=n(6);function p(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](i.parts[s]);for(;s<i.parts.length;s++)o.parts.push(y(i.parts[s],e))}else{var a=[];for(s=0;s<i.parts.length;s++)a.push(y(i.parts[s],e));r[i.id]={id:i.id,refs:1,parts:a}}}}function h(t,e){for(var n=[],i={},o=0;o<t.length;o++){var r=t[o],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};i[s]?i[s].parts.push(a):n.push(i[s]={id:s,parts:[a]})}return n}function d(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=a(t.insertAt.before,n);n.insertBefore(e,o)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return n.nc}();i&&(t.attrs.nonce=i)}return g(e,t.attrs),d(t,e),e}function g(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function y(t,e){var n,i,o,r;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}if(e.singleton){var s=c++;n=l||(l=m(e)),i=x.bind(null,n,s,!1),o=x.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),d(t,e),e}(e),i=function(t,e,n){var i=n.css,o=n.sourceMap,r=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||r)&&(i=f(i));o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([i],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),o=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),i=function(t,e){var n=e.css,i=e.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){v(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return p(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var s=n[o];(a=r[s.id]).refs--,i.push(a)}t&&p(h(t,e),e);for(o=0;o<i.length;o++){var a;if(0===(a=i[o]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete r[a.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function x(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i);var r=function(){this.size=0,this.items=[],this.tips=[],this.showSolution=!1,this.solverSucceed=null,this.playMode=!1};n(2);var s=function(t){let e=t.size,n=t.items,i=t.tips,o="";return o+=a(),o+=l(t.showSolution,t.playMode),o+=u(e,n,i,t.showSolution),o+=c(t.solverSucceed)};let a=function(){return'<header><div class="title"><span>Lights Out Playground</span></div></header>'},l=function(t,e){let n="";return n+='<div id="field-controls">',n+=`<a id="button-solve" class="button main ${t?"active":""}">Solve!</a>`,n+=`<a id="button-play-mode" class="button ${e?"active":""}">Play</a>`,n+='<a id="button-randomize" class="button">Randomize</a>',n+='<a id="button-clean" class="button">Clean</a>',n+='<a id="button-dec-size" class="button">Size--</a>',n+='<a id="button-inc-size" class="button">Size++</a>',n+="</div>"},c=function(t){let e="";return!1===t&&(e+='<div class="note"><p>It seems this field presentation is not valid.</p></div>'),e},u=function(){let t={render:function(t,e,n,i){let o='<div class="game-field">';for(let r=0;r<t;r++)o+=this._renderRow(t,r,e[r],n[r],i);return o+="</div>"},_renderRow:function(t,e,n,i,o){let r='<div class="cells-row">';for(let s=0;s<t;s++)r+=this._renderCell(e,s,n[s],i[s],o);return r+="</div>"},_renderCell:function(t,e,n,i,o){let r="";return r+=`<div class="cell-wrapper" data-cell-highlight="${!!o&&i}"> `,r+="<div ",r+='class="cell" ',r+=`data-cell-activated=${n} `,r+=`data-cell-i=${t} `,r+=`data-cell-j=${e} `,r+="></div></div>"}};return t.render.bind(t)}(),f=function(t){this.controller=t,this.component=new o.a("#app_root",{template:s})};var p=f;f.prototype.attachTo=function(t){this.component.data=t.data,t.attach(this.component)},f.prototype.render=function(){this.component.render()},f.prototype.setupEventListeners=function(){let t=this.controller;document.addEventListener("click",function(e){let n=e.target;if(n.classList.contains("cell")){let e=Number.parseInt(n.getAttribute("data-cell-i")),i=Number.parseInt(n.getAttribute("data-cell-j"));t.clickCell(e,i)}else if("button-solve"===n.id)t.solve();else if("button-inc-size"===n.id||"button-dec-size"===n.id){let e="button-inc-size"===n.id?1:-1,i=t.getFieldSize()+e;t.setFieldSize(i)}else"button-play-mode"===n.id?t.setPlayMode(!t.getPlayMode()):"button-randomize"===n.id?t.randomizeField():"button-clean"===n.id&&t.cleanField()})};let h=function(t,e){this.size=t,this.items=e};h.makeNewEmpty=function(t){let e=[];for(let n=0;n<t;n++){let n=[];for(let e=0;e<t;e++)n.push(!1);e.push()}return new h(t,e)};var d=h;let v=function(...t){d.call(this,...t)};var m=v;(v.prototype=Object.create(d.prototype)).getSum=function(t,e){let n=this.items,i=this.size,o=!1;return o^=n[t][e],t>0&&(o^=n[t-1][e]),t<i-1&&(o^=n[t+1][e]),e>0&&(o^=n[t][e-1]),e<i-1&&(o^=n[t][e+1]),Boolean(o)},v.MakeNew=function(t,e){let n=[];for(let i=0;i<t;i++){n.push([]);for(let o=0;o<t;o++)n[i].push(e(i,o))}return new v(t,n)};let g=function(...t){d.call(this,...t)};var y=g;(g.prototype=Object.create(d.prototype)).fitsState=function(t){if(t.size!==this.size)throw"Presentation and state sizes must match";for(let e=0;e<this.size;e++)for(let n=0;n<this.size;n++)if(t.getSum(e,n)!==this.items[e][n])return!1;return!0},g.prototype.inverse=function(){let t=[];for(let e=0;e<this.size;e++){t.push([]);for(let n=0;n<this.size;n++)t[e].push(!this.items[e][n])}return new g(this.size,t)},g.prototype.toggle=function(t,e){let n=this.items,i=this.size;n[t][e]=!0!==n[t][e],t>0&&(n[t-1][e]=!n[t-1][e]),t<i-1&&(n[t+1][e]=!n[t+1][e]),e>0&&(n[t][e-1]=!n[t][e-1]),e<i-1&&(n[t][e+1]=!n[t][e+1])},g.MakeNew=function(t,e){let n=[];for(let i=0;i<t;i++){n.push([]);for(let o=0;o<t;o++)n[i].push(e(i,o))}return new g(t,n)};let b=function(t,e){this.fieldSize=t,this.fillDirective=e},w=function(t){this.presentationMatrix=t},x=function(...t){d.call(this,...t)};var S=x;(x.prototype=Object.create(d.prototype)).getEffectiveness=function(){let t=0;for(let e=0;e<this.size;e++)for(let n=0;n<this.size;n++)this.items[e][n]&&t++;return t};var z=function(){let t={};return function(e,n){return void 0===t[e]&&(t[e]={}),void 0===t[e][n]&&(t[e][n]={i:e,j:n}),t[e][n]}}();let k=function(t){this.size=t,this._cellsStack=[],this._filledCellsStack=[]};var j=k;k.prototype.push=function(t){let e;this._cellsStack.push(t),e=0===this._filledCellsStack.length?new Set:this._filledCellsStack[this._filledCellsStack.length-1],e=new Set([...e,...t.keys()]),this._filledCellsStack.push(e)},k.prototype.pop=function(){this._cellsStack.pop(),this._filledCellsStack.pop()},k.prototype.get=function(t){if(0===this._filledCellsStack.length||!this._filledCellsStack[this._filledCellsStack.length-1].has(t))return null;for(let e=0;e<this._cellsStack.length;e++)if(this._cellsStack[e].has(t))return this._cellsStack[e].get(t)},k.prototype.set=function(t,e){this._cellsStack[this._cellsStack.length-1].set(t,e),this._filledCellsStack[this._filledCellsStack.length-1].add(t)},k.prototype.has=function(t){let e=this._filledCellsStack[this._filledCellsStack.length-1];return void 0!==e&&e.has(t)},k.prototype.hasAllValues=function(){return this._filledCellsStack.length&&this._filledCellsStack[this._filledCellsStack.length-1].size===this.size*this.size},k.prototype.toState=function(){let t=[];for(let e=0;e<this.size;e++){t.push([]);for(let n=0;n<this.size;n++)t[e].push(this.get(z(e,n)))}return new m(this.size,t)};var M=function(t){let e=[],n=[],i=[],o=0,r=t.size,s=new E(r),a=s.get(o),l=t.items[a.i][a.j],c=new j(r);for(n.push(C(r,a,l,c)),i.push(-1);0!==n.length;){let u=++i[i.length-1];if(u>=n[n.length-1].length){o--,c.pop(),n.pop(),i.pop();continue}let f=n[n.length-1][u];if(c.push(f),o===r*r-1&&c.hasAllValues()){e.push(c.toState()),c.pop();continue}a=s.get(++o),l=t.items[a.i][a.j];let p=C(r,a,l,c);null!==p?(n.push(p),i.push(-1)):(o--,c.pop())}return e};let C=function(t,e,n,i){let o=[e];e.i>0&&o.push(z(e.i-1,e.j)),e.i<t-1&&o.push(z(e.i+1,e.j)),e.j>0&&o.push(z(e.i,e.j-1)),e.j<t-1&&o.push(z(e.i,e.j+1));let r=[...o].filter(t=>i.has(t)),s=r.reduce((t,e)=>t!==i.get(e),!1);if(r.length===o.length)return n===s?[new Map]:null;let a=[...o].filter(t=>!i.has(t)),l=[];for(let t of _(a.length)){if(t.reduce((t,e)=>t!==e,s)===n){let e=new Map(O(a,t));l.push(e)}}return 0===l.length?null:l},E=function(t){this.size=t};E.prototype.get=function(t){return z(Math.floor(t/this.size),t%this.size)};const _=function*(t){let e=2**t;for(let n=0;n<e;n++){let e=[];for(let i=0;i<t;i++)e.push((n&1<<i)>0);yield e}},O=function*(t,...e){let n=e.map(t=>t.length).reduce((t,e)=>e<t?e:t,t.length);for(let i=0;i<n;i++)yield[t[i],...e.map(t=>t[i])]};let N=function(t,e){this.fieldSize=t,this.presentationMatrix=e},A=function(t,e,n){this.success=t,this.fieldSize=e,this.diffMatrix=n},D=function(t){let e=t[0],n=e.getEffectiveness();for(let i=1;i<t.length;i++){let o=t[i].getEffectiveness();o<n&&(e=t[i],n=o)}return e},R=function(t,e,n,i){this.fieldSize=t,this.presentationMatrix=e,this.i=n,this.j=i},L=function(t){this.newPresentationMatrix=t},F=function(t){this.state=t};var T=F;F.prototype.initialize=function(){this.state.setData(this._makeNewField(3,null))},F.prototype._makeNewField=function(t,e){let n=function(t){let e,n=t.fieldSize;switch(t.fillDirective){case null:let i=m.MakeNew(n,()=>Math.random()<.5);e=new y.MakeNew(t.fieldSize,(t,e)=>i.getSum(t,e));break;case!0:case!1:e=new y.MakeNew(t.fieldSize,()=>t.fillDirective);break;default:throw`Unknown fillDirective ${t.fillDirective}`}return new w(e.items)}(new b(t,e)).presentationMatrix,i=[];for(let e=0;e<t;e++){i.push([]);for(let n=0;n<t;n++)i[e].push(!1)}return{size:t,items:n,tips:i,solverSucceed:null,showSolution:!1}},F.prototype.getFieldSize=function(){return this.state.getData().size},F.prototype.setFieldSize=function(t){t<2||t>12||this.state.setData(this._makeNewField(t,null))},F.prototype.solve=function(){let t=this.state.getData();if(t.showSolution)t.showSolution=!1,this.state.setData(t);else{let e=function(t){let e=t.fieldSize,n=new y(e,t.presentationMatrix).inverse(),i=M(n).map(function(t){return new S(t.size,t.items)});if(0===i.length)return new A(!1);let o=D(i);return new A(!0,e,o.items)}(new N(t.size,t.items)),n={solverSucceed:e.success};e.success&&(n.tips=e.diffMatrix,n.showSolution=!0),this.state.setData(n)}},F.prototype.clickCell=function(t,e){let n=this.state.getData();if(n.playMode){let i=function(t){let e=new y(t.fieldSize,t.presentationMatrix);return e.toggle(t.i,t.j),new L(e.items)}(new R(n.size,n.items,t,e));n.items=i.newPresentationMatrix,n.solverSucceed&&(n.tips[t][e]=!0!==n.tips[t][e]),this.state.setData(n)}else n.items[t][e]=!n.items[t][e],this.state.setData({items:n.items,showSolution:!1})},F.prototype.getPlayMode=function(){return this.state.getData().playMode},F.prototype.setPlayMode=function(t){let e=this.state.getData();e.playMode=t,this.state.setData(e)},F.prototype.randomizeField=function(){let t=this.state.getData(),e=this._makeNewField(t.size,null);this.state.setData(e)},F.prototype.cleanField=function(){let t,e=this.state.getData(),n=e.items.reduce((t,e)=>t+e.reduce((t,e)=>t+e,!1),!1);t=0===n||(e.size,e.size,!1),this.state.setData(this._makeNewField(e.size,t))};!function(){let t=new r,e=new o.a(null,{lagoon:!0,data:t}),n=new T(e),i=new p(n);n.initialize(),i.attachTo(e),i.setupEventListeners(),i.render()}()}]);